# 需求分析文档

## 1. 引言

### 1.1 背景
当前 Novel Splitter 系统采用前后端混合的架构，前端为简单的静态 HTML 文件，难以维护和扩展。为了提升用户体验和开发效率，计划将前端剥离为独立的 React 应用，并采用现代化的技术栈进行重构。

### 1.2 目标
- 将前端从 Spring Boot 后端中分离，建立独立的 Web 工程。
- 复刻现有 `index.html` 的所有功能。
- 采用 React 19 + TypeScript + Vite 6 等前沿技术栈。
- 优化 UI/UX，提供更流畅的交互体验。

## 2. 目标用户
- **小说爱好者/研究者**：希望通过 RAG 技术与小说内容进行对话，探索小说细节。
- **系统管理员**：负责管理小说数据的入库、向量数据库的维护。

## 3. 功能范围

### 3.1 核心功能
| 模块 | 功能点 | 描述 |
| :--- | :--- | :--- |
| **对话问答 (Chat)** | 选择小说与版本 | 用户需先选择已入库的小说及其版本。 |
| | 参数配置 | 可配置 TopK (引用数量)。 |
| | 对话交互 | 发送问题，接收流式/非流式回答，并显示参考来源 (Citations)。 |
| | 历史记录 | 显示当前的对话历史。 |
| **知识库管理 (Knowledge)** | 版本列表 | 查看指定小说已生成的知识库版本。 |
| | 场景预览 | (规划中) 查看特定版本的场景切分详情。 |
| **入库处理 (Ingest)** | 小说列表 | 展示服务器上待处理的 TXT 文件。 |
| | 文件上传 | 上传本地 TXT 小说文件到服务器。 |
| | 入库配置 | 配置版本号、最大处理场景数。 |
| | 触发入库 | 启动后台入库任务。 |
| **系统管理 (System)** | 数据库状态 | 查看 ChromaDB 的文档总数、存储类型。 |
| | 按小说清理 | 删除指定小说在向量数据库中的数据。 |
| | 全局重置 | 清空整个向量数据库。 |

### 3.2 非功能性需求
- **响应速度**：页面加载迅速，交互无卡顿。
- **用户体验**：清晰的导航，友好的错误提示。
- **代码质量**：遵循 React 最佳实践，组件化、模块化。

## 4. 关键假设
- 后端 API 接口保持现状，暂不进行大规模重构 (仅跨域配置等必要调整)。
- 浏览器支持现代 Web 标准 (ESM 等)。

## 5. 排除范围 (Out of Scope)
- 用户认证与鉴权 (目前为单机工具)。
- 复杂的后台任务进度实时推送 (目前仅简单的异步触发)。
- 小说内容的在线阅读功能。
